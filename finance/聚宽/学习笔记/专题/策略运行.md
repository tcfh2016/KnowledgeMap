# 运行频率

策略支持天、分钟及tick频率，同时可以按指定时间运行。定时运行的API包括[run_daily, run_monthly, run_weekly, hanfle_data, handle_tick](https://www.joinquant.com/help/api/help?name=api#run_daily)。

策略运行频率与获取数据的频率是独立的，数据的频率有月、周、天、小时、三十分钟，通过[数据获取函数](https://www.joinquant.com/help/api/help?name=api#%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E5%87%BD%E6%95%B0)进行获取。

# 运行时间

策略的运行时间和策略频率（天、分钟或者tick）与控制策略运行的API共同完成。

**盘前运行**

- run_monthly/run_weekly/run_daily中指定time='09:00'运行的函数
- before_trading_start。

**盘中运行**

- run_monthly/run_weekly/run_daily，在指定时间分钟的第一秒执行
- handle_data
- 说明：按日回测时在9:30:00运行，按分钟回测则在每分钟第一秒运行

**盘后运行**

- run_monthly/run_weekly/run_daily中指定time='15:30'运行
- after_trading_end

另外要注意：① initialize / before_trading_start / after_trading_end / handle_data 都是可选的, 如果不是必须的, 不要实现这些函数, 一个空函数会降低运行速度; ② run_xxx和handle_data不要在同一个策略中使用，建议使用run_xxxx; ③一个策略中可以写多个run_xxx函数。

# 函数使用

```
# 按月运行
run_monthly(func, monthday, time='9:30', reference_security, force=False)
# 按周运行
run_weekly(func, weekday, time='9:30', reference_security, force=False)
# 每天内何时运行(没有force属性)
run_daily(func, time='9:30', reference_security)

参数：

func 	一个自定义的函数, 此函数必须接受context参数;例如自定义函数名market_open(context)
force 	run_weekly和run_monthly中使用，run_daily不可使用；表示若注册回调函数的时间晚于第一次回调的执行时间是否就近执行；默认为True，建议使用False
monthday 	每月的第几个交易日, 可以是负数, 表示倒数第几个交易日。
weekday 	每周的第几个交易日, 可以是负数, 表示倒数第几个交易日。
time 	具体执行时间,一个字符串格式的时间,有两种方式：(1) 24小时内的任意时间，例如"10:00", "01:00"；在tick频率的策略中，可以精确到秒(2)time="every_bar",只能在 run_daily 中调用,运行时间和您设置的频率一致，按天会在交易日的开盘时调用一次，按分钟会在交易时间每分钟运行。

```
