# 第二篇 估值与资本预算

## 第4章 折现现金流量估价

### 1 单期投资的情形

#### 1.1 现值分析和终值分析

现值（present value），即当前的价值。在给定年利率12%的情况下，我们现在应将多少钱存入银
行才能在一年后得到11424美元。

> PV = C1 / (1 + r)

终值（future value）或者复利值（compound value），用来描述一笔资金经过一个时期或者多个
时期以后的价值。

> FV = PV * (1 + r)

在分析一项投资是无论是现值分析还是终值分析均能得出相同的理论。

#### 1.2 净现值

企业管理者或者投资者常常更想知道一项决策确切的成本或者收益。因此可以将现值分析更换一种形
式：

> NPV = -成本 + PV

如上的定义为净现值（NPV），指的是这项投资未来现金流的现值减去成本的现值得到的结果。该公
式的运用需要假设投资的收益和成本是完全确定的。然而，现实生活中人们往往很难确定未来的现金
流。

一项无风险投资的折现率可以通过银行的利率来体现，但对于风险投资的折现率就不好选择了。

### 2 多期投资的情形

#### 2.1 单利和复利

投资者A有一项本金为1美元，年利率r为9%的投资，假设他预备投资2年，那么在一年之后他会面临两
个选择：

- 将收回的1.09美元的本息再进行投资；
- 将收回的1.09美元的0.09美元利息花掉，1美元的本金再投资。

对于第二种情况，A在第2年末可以收取的利息为1.18美元。然而，第二种情况却可以收取1.1881美
元的利息，多出来的0.0081是第一年利息所产生的利息。我们称第一种投资方式为复利（compound
interest），第二种投资方式为单利（simple interest）。

如下公式可以用来计算一笔投资在多期后的终值：

> FV = C0 * (1 + r)^T

其中C0为期初投资的金额，r是利息率，T是资金投资所持续的时期数。

#### 2.2 复利的威力

> 几年前一个人类学家在一件遗物中发现一个声明：凯撒借给某人相当于1罗马便士的钱，由于没有
记录说明这1便士是否已经偿还，这位人类学家想知道，如果在20世纪凯撒的后代想向借款人的后代
要回这笔钱，那么本息值会是多少？他认为6%的利率较为合适。令他震惊的是，2000多年后，这1便
士的本息值竟然超过了整个地球上的所有财富。

#### 2.3 现值和折现

计算未来现金流现值的过程叫做折现（discounting），它是复利计息的相反过程：

> PV = Ct / (1 + r)^t （*注：Markdown里面无法打印出上标，因此这里的t改为小写以做区分*）

在计算现值时通常会使用到现值系数（present value factor），它表示以该值以利率r投资T年后
能够得到价值1美元的终值。

### 3 复利计息期数

#### 3.1 名义年利率与实际年利率

复利的计息和折现可以以年为单位进行，但现实中复利的计息会在一年中发生多次的情况也不少见。

假设银行给储户10%的年利率，每半年按复利计息，那么银行中1000美元的存款半年后为1050美元，
再过半年为1102.5美元，结果一年后的存款价值为1102.50美元。

例子中的10%为`名义年利率`，也称为年百分比利率（annual percentage rate, APR）。而这里
的10.25%称为`实际年利率`（effective annual rate, EAR）或`实际年收益率`（effective
annual yield, EAY）。由于复利计息的缘故，实际年利率要高于名义年利率。

总结上面例子中的公式，一年中一项投资每年按复利计息m次的年末终值为：

> C0 * (1 + r/m)^m

实际年利率的公式为：

> (1 + r/m)^m - 1

#### 3.2 多年期复利

上面讨论的是一项投资经过1年的终值公式，如果一项投资历经t年，其终值计算公式变为：

> FV = C0 * (1 + r/m)^m*t

### 4 现金流计算的公式

前面探讨的现值和终值的概念有助于解决许多有关货币时间价值的问题，但我们常常要做许多更繁琐
的工作，下面是与此相关的简化公式。

#### 4.1 永续年金

永续年金（Perpetuity）是一系列无限持续的恒定的现金流。英国政府曾经发行过金边债券就是一个
十分著名的永续年金的例子。一个购买金边债券的投资者永远享有每年都在英国政府领取利息的权利。

永续年金的现值计算公式为：

> PV = C/(1+r) + C/(1+r)^2 + C/(1+r)^3 +... = C/r

永续年金/金边债券的现值是它未来所有利息收入的现值的加总。换句话说，它是这样一笔资金，如果
投资者现在拥有它，会与拥有金边债券及其利息具有同样的消费能力。

#### 4.2 永续增长年金

假如有一个房屋建筑在扣除各项费用后，`明年`房东会有 100000美元的房租现金收入。这笔现金流
预计会以每年5%的速度增长。如果能肯定这种增长趋势将永远持续下去，这种现金流序列就称做永续
增长年金（growing perpetuity）。它的计算公式为：

> PV = C/(1+r) + C*(1+g)/(1+r)^2 + C*(1+g)^2/(1+r)^3 +... = C/(r-g)

其中，C是`现在开始一期以后收到的现金流`；g是每期的增长率；r是适用的折现率。所以，该式子
计算的是一年后所有年金的总和，不包括当前。

- 折现率和增长率

折现率r一定要高于增长率g，这样永续增长年金公式才有意义。假设增长率与折现率数值十分接近，
公式中的分母就会趋于无穷小，以至于现值会变得无穷大。事实上，一旦增长率g高于折现率r，计算
现值就没有意义了。

- 时间假设

如上计算式子只有在假设现金流是有规律和确定的情况下才能应用。但在现实世界中，公司现金的流
入或流出是随机的，并且是几乎连续不断的。

#### 4.3 年金

年金是指一系列稳定有规律的、持续一段固定时期的现金收付活动。它是一项最为常见的金融工具。
人们退休后所得到的养老金经常是以年金的形式发放，租凭费和按揭贷款也通常是年金的形式。

T期内的年金计算方法为用`1期开始付息的金边债券现值`减去`第T+1期开始付息的金边债券现值`：

> PV = C/r - C/(1+r)^T/r = C*(1/r - 1/(r*(1+r)^T)) = C*((1-1/(1+r)^T) / r)

年金的终值计算公式：

> FV = C*((1+r)^T/r - 1/r) = C*(((1+r)^T - 1) / r)

- 举例1：年金现值的应用场景

Mark Young赢得了一项州博彩大奖，在以后20年中每年得到50000美元的奖金，一年以后开始领取奖
金。若年利率为8%，这项奖项的真实价值是多少？

> 现值 = 50000 * ((1-1/1.08^20)/0.08) = 50000 * 9.8181 = 490905美元

如上的9.8181为年金现值系数，表达的是在利率为r的情况下，T年内每年获得1美元的年金的现值。

- 举例2：年金终值的应用场景

假设每年向个人退休账户里存入3000美元，该账户每年支付6%的利息，30年后退休时能得到多少钱？

> 终值 = 3000 * (((1.06^30 - 1) / 0.06)) = 3000 * 79.0582 = 237174.56美元

如上的79.0582为年金终值系数。

#### 4.4 增长年金

增长年金是一种在有限时期内增长的现金流。现实生活中永续年金种类比较少，因而增长年金计算公
式十分有用：

> PV = C*(1/(r-g) - 1/(r-g) * (((1+g)/(1+r))^T)) = C*((1 - ((1+g)/(1+r))^T) / (r-g))

#### 4.5 分期偿还贷款

这一小结讨论了分期偿还贷款的三种形式，对应于当前国内的说法分别为：等额本金，等额本息和提
前还款这么几种方式。

- 等额本金

等额本金很简单，就是每年偿还相同数量的本金，然后利息根据未偿还的本金进行计算。

- 等额本息

等额本息在概念上也很简单，就是每年偿还相同金额的本金+利息，但在计算上需要利用前面讨论的年
金的概念。假定一项5年期、利息9%、5000美元的借款按照等额本息的方式偿还，那么根据年金计算公
式可得：

> 5000 = C * ((1 - (1/1.09)^5)/0.09)

反向计算得到 C = 1285.46美元，即为每年的偿还额。

这种方式因为最初所偿还的本金较少，因此相较于第一种方式会偿还更多的利息。

- 提前还款

提前还款是在正常偿还一定时间的本息之后一次性将剩余的本息全部结清，当然国内对于这种方式银
行通常会有一些附加条款，比如支付一定数量的违约金之类。

贷款时选择等额本金还是等额本息，提前还款如何还更合算，可以专找时间讨论。

## 第5章 净现值和投资评价的其他方法

## 第6章 投资决策

## 第7章 风险分析、实物期权和资本预算

## 第8章 利率和债券估值

## 第9章 股票估值
