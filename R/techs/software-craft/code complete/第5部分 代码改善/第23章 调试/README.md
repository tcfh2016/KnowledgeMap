## 第23章 调试

调试是确定错误根本原因并纠正此错误的过程。同测试不同，后者是检测错误的过程。在一些项目中，调试可能占到整个开发周期的50%。对很多程序员来说，调试是程序设计中最为困难的部分。

调试原本不是最难解决的问题。如果严格遵照本书所提供的建议，你几乎没有什么错误需要调试。你所面对的绝大多数问题将都是一些微笑的疏忽和拼写错误，这些很容易通过阅读源代码列表或在调试器中单步跟踪来发现。

### 23.1 调试概述

同测试一样，调试本身并不是改进代码质量的方法，而是诊断代码缺陷的一种方法。软件的质量必须从开始逐步建立：开发高质量软件产品的最佳途径是精确描述需求，完善设计，并使用高质量的代码编写规范。调试只是迫不得已时采用的手段。

效率低下的调试方法包括：凭猜测找出缺陷、不把时间浪费在理解问题上、用最唾手可得的方式修正错误。

每个团队里也许有这样一个程序员，他总会遇到无穷的问题：不听话的机器，奇怪的编译起错误，月圆时才会出现的编程语言的隐藏缺陷，失效的数据，忘记做重要的改动，一个不能正常保存程序的疯狂编辑器等等。这就是“迷信式编程”。要知道，如果你写的程序出了问题，那就是你的原因，不是计算机的，也不是编译器的。程序不会每次都产生不同的结果。它不是自己写出来的，是你写的，所以，请对它负责。

### 23.2 寻找缺陷

调试包括了寻找缺陷和修正缺陷。寻找缺陷——并且理解缺陷——通常占到了整个调试工作的90%。高效的程序员不是随机地猜测如何修正程序，他们使用科学的方法——即所有科学探索所必需的发现和实证的过程。下面给出了一种寻找缺陷的有效方法：

1. 将错误状态稳定下来；
2. 确定错误的来源
  - 收集产生缺陷的相关数据
  - 分析收集的数据，并构造对缺陷的假设
  - 确定怎样去证实或证伪这个假设，可以对程序进行测试或检查代码
  - 按照上一步对假设做出最终结论
3. 修补缺陷
4. 对修补的缺陷进行测试
5. 查找是否还有类似错误

### 23.3 
